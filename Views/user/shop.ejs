
<%-include('navbar')-%>

    <link rel="stylesheet" href="css/magicZoom.css" type="text/css">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__text">
                        <h4>Shop</h4>
                        <div class="breadcrumb__links">
                            <a href="/">Home</a>
                            <span>Shop</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Shop Section Begin -->
    <section class="shop spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3">
                    <div class="shop__sidebar">
                        <div class="shop__sidebar__search">
                            <form action="/shop" method="get">
                                <input type="text" placeholder="Search..." name="search">
                                <button type="submit"><span class="icon_search"></span></button>
                            </form>
                        </div>
                        <div class="shop__sidebar__accordion">
                            <div class="accordion" id="accordionExample">
                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                                    </div>
                                    <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__categories">
                                                <ul class="nice-scroll">
                                                    <% categories.forEach(category=> { %>
                                                   <li> 
                                                    <a href="/shop?category=<%= category._id %>"> 
                                                        <%= category.name %>
                                                        <span class="text-black ml-auto">
                                                            (<%= categoryCounts[category._id] || 0 %>)
                                                          </span>
                                                    </a>
                                                 </li>
                                                 <% }); %>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseThree">Sort-By</a>
                                    </div>
                                    <div id="collapseThree" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__price">
                                                <ul>
                                                    <li><a href="?sortBy=nameAZ<%= search ? '&search=' + search : '' %>">Name, A to Z</a></li>
                                                    <li><a href="?sortBy=nameZA<%= search ? '&search=' + search : '' %>">Name, Z to A</a></li>
                                                    <li><a href="?sortBy=priceHigh<%= search ? '&search=' + search : '' %>">Price, low to high</a></li>
                                                    <li><a href="?sortBy=priceLow<%= search ? '&search=' + search : '' %>">Price, high to low</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseFour">Size</a>
                                    </div>
                                    <div id="collapseFour" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__size">
                                                <label for="xs">xs
                                                    <input type="radio" id="xs">
                                                </label>
                                                <label for="sm">s
                                                    <input type="radio" id="sm">
                                                </label>
                                                <label for="md">m
                                                    <input type="radio" id="md">
                                                </label>
                                                <label for="xl">xl
                                                    <input type="radio" id="xl">
                                                </label>
                                                <label for="2xl">2xl
                                                    <input type="radio" id="2xl">
                                                </label>
                                                <label for="xxl">xxl
                                                    <input type="radio" id="xxl">
                                                </label>
                                                <label for="3xl">3xl
                                                    <input type="radio" id="3xl">
                                                </label>
                                                <label for="4xl">4xl
                                                    <input type="radio" id="4xl">
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->

                                <!-- <div class="card">
                                    <div class="card-heading">
                                        <a data-toggle="collapse" data-target="#collapseSix">Tags</a>
                                    </div>
                                    <div id="collapseSix" class="collapse show" data-parent="#accordionExample">
                                        <div class="card-body">
                                            <div class="shop__sidebar__tags">
                                                <a href="#">Product</a>
                                                <a href="#">Bags</a>
                                                <a href="#">Shoes</a>
                                                <a href="#">Fashio</a>
                                                <a href="#">Clothing</a>
                                                <a href="#">Hats</a>
                                                <a href="#">Accessories</a>
                                            </div>
                                        </div>
                                    </div>
                                </div> -->

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9">
                    <div class="shop__product__option">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <div class="shop__product__option__left">
                                    <p>Showing 1â€“12 of 126 results</p>
                                </div>
                            </div>  


                        </div>
                    </div>
                    <% if (products.length > 0) { %>
                        <div class="row">
                            <% products.forEach(product => { %>
                                <div class="col-lg-4 col-md-6 col-sm-6 mb-4" data-aos="fade-up">
                                    <div class="product__item">
                                        <div class="product__item__pic set-bg" data-setbg="<%= product.image[0] %>">
                                            <a href="/singleproduct/<%= product._id %>">
                                                <img src="<%= product.image[0] %>" alt="<%= product.name %>">
                                            </a>
                                            <ul class="product__hover">
                                                <li><a href="/singleproduct/<%= product._id %>"><img src="img/icon/heart.png" alt=""></a></li>
                                                <li><a href="#"><img src="img/icon/search.png" alt=""></a></li>
                                            </ul>
                                        </div>
                                        <div class="productText">
                                            <h4>
                                                <%= product.name %>
                                            </h4>
                    
                                            <p class="text-danger font-weight-bold my-0"
                                                style="line-height: 2; font-size: 18px;">
                                                <span style="text-decoration: line-through;">
                                                    â‚¹<%= product.price %>
                                                </span>&nbsp; â‚¹<%= product.discountPrice %>
                                            </p>
                                            <p class="text-primary my-0" style="line-height: 0.5;">
                                                <%= product.discount %>% OFF
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            <% }) %>
                        </div>
                    <% } else { %>
                        <div class="alert alert-warning" role="alert">
                            No products found.
                        </div>
                    <% } %>
                    


                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="product__pagination">
                                        <% if (currentPage > 1) { %>
                                            <a href="?page=<%= currentPage - 1 %><%= search ? '&search=' + search : '' %><%= sortBy ? '&sortBy=' + sortBy : '' %><%= categoryId ? '&category=' + categoryId : '' %>">&lt;</a>
                                        <% } %>
                                        <% for (let i=1; i <= totalPage ; i++) { %>
                                            <a href="?page=<%= i %><%= search ? '&search=' + search : '' %><%= sortBy ? '&sortBy=' + sortBy : '' %><%= categoryId ? '&category=' + categoryId : '' %>" <% if (currentPage === i) { %>class="active"<% } %>>
                                                <%= i %>
                                            </a>
                                        <% } %>
                                        <% if (currentPage < totalPage) { %>
                                            <a href="?page=<%= currentPage + 1 %><%= search ? '&search=' + search : '' %><%= sortBy ? '&sortBy=' + sortBy : '' %><%= categoryId ? '&category=' + categoryId : '' %>">&gt;</a>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                            
                 </div>
           </section>
    <!-- Shop Section End -->

    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__logo font-weight-bold" style="font-size: xx-large; letter-spacing: 1px;">
                            <a href="/"><img src="" alt="">Fashion World</a>
                        </div>
                        <p>The customer is at the heart of our unique business model, which includes design.</p>
                        <a href="/shop"><img src="img/payment.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-2 offset-lg-1 col-md-3 col-sm-6">
                    <div class="footer__widget">
                        <h6>Shopping</h6>
                        <ul>
                            <li><a href="/shop">Clothing Store</a></li>
                            <li><a href="/shop">Trending Shoes</a></li>
                            <li><a href="/shop">Accessories</a></li>
                            <li><a href="/shop">Sale</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6">
                    <div class="footer__widget">
                        <h6>Shopping</h6>
                        <ul>
                            <li><a href="/shop">Contact Us</a></li>
                            <li><a href="/shop">Payment Methods</a></li>
                            <li><a href="/shop">Delivary</a></li>
                            <li><a href="/shop">Return & Exchanges</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3 offset-lg-1 col-md-6 col-sm-6">
                    <div class="footer__widget">
                        <h6>NewLetter</h6>
                        <div class="footer__newslatter">
                            <p>Be the first to know about new arrivals, look books, sales & promos!</p>
                            <form action="#">
                                <input type="text" placeholder="Your email">
                                <button type="submit"><span class="icon_mail_alt"></span></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="footer__copyright__text">
                        <!-- you can give your own instas link or snap or youtube -->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    
    
     

    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
    </body>

    </html>